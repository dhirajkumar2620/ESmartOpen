@model App_Layer.PatientDetails
@{
    ViewBag.Title = "PatientRegistration";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div>
    <!-- Page Header-->
    <header class="page-header">
        <div class="container-fluid">
            <h2 class="no-margin-bottom">Add Patient</h2>
        </div>
    </header>

    <section class="forms">
        @using (Html.BeginForm("ManagePatientDetails", "PatientDetails", FormMethod.Post, new { @id = "frmPatientDetails" }))
        {
            @Html.HiddenFor(m => m.Id);
            <div class="container-fluid">
                <div class="row">
                    <!-- Basic Form-->
                    <div class="col-lg-12">
                        <div class="card">

                            <div class="card-body">
                                <p>Need to fill mandatory fields.</p>
                                <form>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Name<span class="star">*</span></label>
                                                @Html.TextBoxFor(m => m.PatientName, new { @id = "txtName", @class = "form-control", required = "required", @placeholder = "Patient Name" })
                                                @Html.ValidationMessageFor(model => model.PatientName, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Gender<span class="star">*</span></label>
                                                @Html.DropDownListFor(m => m.Gender, new List<SelectListItem>
                                                     {

                                                         new SelectListItem{ Text="Male", Value = "Male" },
                                                         new SelectListItem{ Text="Female", Value = "Female" },
                                                          new SelectListItem{ Text="Other", Value = "Other" },
                                                      }, new { @class = "form-control mb-3", @id = "ddlGender" })

                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Blood Group</label>

                                                @Html.DropDownListFor(m => m.BloodGroup, new List<SelectListItem>
                                                     {
                                                         new SelectListItem{ Text="Select Blood Group", Value = "0" },
                                                         new SelectListItem{ Text="A+", Value = "A+" },
                                                         new SelectListItem{ Text="A-", Value = "A+" },
                                                         new SelectListItem{ Text="B+", Value = "B+" },
                                                         new SelectListItem{ Text="B-", Value = "B+" },
                                                         new SelectListItem{ Text="AB+", Value = "AB+" },
                                                         new SelectListItem{ Text="AB-", Value = "AB+" },
                                                         new SelectListItem{ Text="O+", Value = "O+" },
                                                         new SelectListItem{ Text="O-", Value = "O+" },
                                                      }, new { @class = "form-control mb-3", @id = "ddlBloodGroup" })


                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Date of Birth</label>
                                                @*<div class="input-group date" data-provide="datepicker" data-date-format="dd/mm/yyyy">*@
                                                <div class="input-group date" data-provide="datepicker" data-date-format="dd/mm/yyyy">
                                                    @Html.TextBoxFor(m => m.DOB, new { @id = "txtDOB", @type = "text", @class = "form-control datepicker", autocomplete = "off", @placeholder = "dd/mm/yyyy", @onchange = "onchangeevent();" })
                                                    @Html.ValidationMessageFor(model => model.DOB, "", new { @class = "text-danger" })
                                                    <div class="input-group-addon">
                                                        <i class="fa fa-table page-date-icon" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </div>


                                        </div>

                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Age</label>
                                                @*<input type="number" placeholder="Age" class="form-control">*@
                                                @Html.TextBoxFor(m => m.Age, new { @id = "txtAge", @readonly = true, @class = "form-control", @maxlength = "3", autocomplete = "off", @placeholder = "10" })
                                                @Html.ValidationMessageFor(model => model.Age, "", new { @class = "text-danger" })


                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">

                                                <label class="form-control-label">Category</label>
                                                @Html.TextBoxFor(m => m.MaritalStatus, new { @id = "txtMaritalStatus", @class = "form-control", autocomplete = "off", @maxlength = "3", @placeholder = "Category" })
                                                @Html.ValidationMessageFor(model => model.MaritalStatus, "", new { @class = "text-danger" })


                                                @*@Html.DropDownListFor(m => m.MaritalStatus, new List<SelectListItem>
                                                     {
                                                         new SelectListItem{ Text="Unmarried", Value = "Unmarried" },
                                                         new SelectListItem{ Text="Married", Value = "Married" },
                                                      }, new { @class = "form-control mb-3", @id = "ddlMarital" })*@

                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Mobile No.<span class="star">*</span></label>
                                                <div class="input-container">
                                                    <span class="icon">+91</span>
                                                    @Html.TextBoxFor(m => m.WhatsAppNo, new { @id = "txtWhatsAppNo", autocomplete = "off", @class = "form-control", @maxlength = "10", required = "required", @placeholder = "0123456789" })
                                                    @Html.ValidationMessageFor(model => model.WhatsAppNo, "", new { @class = "text-danger" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Other No.</label>
                                                <div class="input-container">
                                                    <span class="icon">+91</span>
                                                    @Html.TextBoxFor(m => m.OtherNo, new { @id = "txtOtherNo", autocomplete = "off", @class = "form-control", @maxlength = "10", @placeholder = "0123456789" })
                                                    @Html.ValidationMessageFor(model => model.OtherNo, "", new { @class = "text-danger" })
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Email ID</label>

                                                @Html.TextBoxFor(m => m.EmailId, new { @id = "txtEmailId", autocomplete = "off", @class = "form-control", @placeholder = "aaa@gmail.com" })
                                                @Html.ValidationMessageFor(model => model.EmailId, "", new { @class = "text-danger" })
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Address<span class="star">*</span></label>

                                                @Html.TextBoxFor(m => m.Address, new { @id = "txtAddress", autocomplete = "off", @class = "form-control", required = "required", @placeholder = "Address" })
                                                @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Referred By Doctor</label>
                                                @Html.TextBoxFor(m => m.ReferedByDoctor, new { @id = "txtReferedByDoctor", autocomplete = "off", @class = "form-control", @placeholder = "Refered By Doctor" })
                                                @Html.ValidationMessageFor(model => model.ReferedByDoctor, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Referred Doctor Address</label>
                                                @Html.TextBoxFor(m => m.DoctorAddress, new { @id = "txtDoctorAddress", autocomplete = "off", @class = "form-control", @placeholder = "Doctor Address" })
                                                @Html.ValidationMessageFor(model => model.DoctorAddress, "", new { @class = "text-danger" })
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">Case Paper Fees (₹)</label>
                                                @Html.TextBoxFor(m => m.CasePaperFees, new { @id = "txtCasePaperFees", @class = "form-control", @maxlength = "5", @placeholder = "100" })
                                                @Html.ValidationMessageFor(model => model.CasePaperFees, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label class="form-control-label">CP Expiry Date</label>
                                                <div class="input-group date" data-provide="datepicker" data-date-format="dd/mm/yyyy">
                                                    @Html.TextBoxFor(m => m.CpExpiryDate, new { @id = "txtMediclaimCompanyName", autocomplete = "off", @type = "text", @class = "form-control datepicker", @placeholder = "dd/mm/yyyy" })
                                                    @Html.ValidationMessageFor(model => model.CpExpiryDate, "", new { @class = "text-danger" })
                                                    <div class="input-group-addon">
                                                        <i class="fa fa-table page-date-icon" aria-hidden="true"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">

                                                <label class="form-control-label">Doctor<span class="star">*</span></label>
                                                
                                                @Html.DropDownListFor(x => x.DoctorReceptionId, new SelectList(ViewBag.Organisations, "UserId", "FirstName"), new { @class = "form-control mb-3", @id = "ddlMarital" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row r-click-show">
                                        <div class="col-md-4">
                                            <label class="form-control-label">Mediclaim</label>
                                            <ul class="list-inline">
                                                <li class="list-inline-item">
                                                    <div class="i-checks ">
                                                        @Html.RadioButtonFor(model => model.AppliedForMediclam, "true", new { @Id = "radioCustom1", @class = "radio-template r-show", @type = "radio" }) @Html.Label("Yes")
                                                        @*<input id="radioCustom2" type="radio" checked="" value="option2" name="a" class="radio-template r-show">*@

                                                        @*<label for="radioCustom2">Yes</label>*@
                                                    </div>
                                                </li>
                                                <li class="list-inline-item">
                                                    <div class="i-checks ">
                                                        @Html.RadioButtonFor(model => model.AppliedForMediclam, "false", new { @Id = "radioCustom2", @class = "radio-template r-hide", @type = "radio", @checked = "" }) @Html.Label("No")
                                                        @*<input id="radioCustom2" type="radio" checked="" value="option2" name="a" class="radio-template r-hide">*@
                                                        @*<label for="radioCustom2">No</label>*@
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-4" style="display:none;">
                                            <div class="form-group">
                                                <label class="form-control-label">Mediclaim Company Name</label>
                                                @Html.TextBoxFor(m => m.MediClmCompany, new { @id = "txtMediclaimCompanyName", autocomplete = "off", @class = "form-control", @placeholder = "Mediclaim Company Name" })
                                                @Html.ValidationMessageFor(model => model.MediClmCompany, "", new { @class = "text-danger" })

                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 text-right">
                                            <a href="~/PatientDetails/ViewAllPatient"><input type="button" value="Back" class="btn btn_1 btn-primary"></a>
                                            <input type="submit" value="Save" class="btn btn_2 b22 btn-primary">
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </section>
    <!-- Page Footer-->
    <footer class="main-footer">
        <div class="container-fluid">
            <div class="row">

                <div class="col-sm-12 footer-img text-right">
                    <p><span class="small">Powered by</span> <img src="img/Powered By company logo.png" class="img-responsive"></p>

                </div>
            </div>
        </div>
    </footer>
</div>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/vendor/jquery/jquery.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>
  


    function onchangeevent() {

        //age calculator 
        document.getElementById("txtAge").value = "";
        var date = document.getElementById("txtDOB").value;
        var newdate = date.split("/").reverse().join("/");
        var today = new Date();
        var birthDate = new Date(newdate);
        var age = today.getFullYear() - birthDate.getFullYear();
        var m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        var no = 1;
        if (age == 0) {


            $("#txtAge").val(no);
        }
        else {

            $("#txtAge").val(age);
        }


    }


    //$("#txtWhatsAppNo").val("+91");
    //$("#txtOtherNo").val("+91");

    $('.r-show').click(function () {
        $('.r-click-show .col-md-4').css('display', 'block');
    });
    $('.r-hide').click(function () {
        $('.r-click-show .col-md-4').css('display', 'none');
    });



</script>